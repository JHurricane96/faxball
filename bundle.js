(()=>{"use strict";var e={552:(e,n,t)=>{t.d(n,{A:()=>s});var o=t(354),a=t.n(o),r=t(314),i=t.n(r)()(a());i.push([e.id,"body {\n  font-family: Arial, sans-serif;\n  text-align: center;\n  background-color: #f0f0f0;\n}\n\n.hidden {\n  display: none;\n}\n\n#signaling {\n  margin: 20px auto;\n  width: 80%;\n  max-width: 600px;\n  background-color: #ffffff;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n\n#signaling div {\n  margin-bottom: 20px;\n}\n\ntextarea {\n  width: 100%;\n  height: 100px;\n  margin: 10px 0;\n  resize: vertical;\n}\n\nbutton {\n  padding: 10px 20px;\n  margin: 5px;\n  cursor: pointer;\n}\n\n#gameCanvas {\n  border: 2px solid #000;\n  background-color: #4CAF50; /* Green field */\n}\n\n#instructions {\n  margin-top: 10px;\n}\n","",{version:3,sources:["webpack://./styles.css"],names:[],mappings:"AAAA;EACE,8BAA8B;EAC9B,kBAAkB;EAClB,yBAAyB;AAC3B;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,iBAAiB;EACjB,UAAU;EACV,gBAAgB;EAChB,yBAAyB;EACzB,aAAa;EACb,kBAAkB;EAClB,uCAAuC;AACzC;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,aAAa;EACb,cAAc;EACd,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,sBAAsB;EACtB,yBAAyB,EAAE,gBAAgB;AAC7C;;AAEA;EACE,gBAAgB;AAClB",sourcesContent:["body {\n  font-family: Arial, sans-serif;\n  text-align: center;\n  background-color: #f0f0f0;\n}\n\n.hidden {\n  display: none;\n}\n\n#signaling {\n  margin: 20px auto;\n  width: 80%;\n  max-width: 600px;\n  background-color: #ffffff;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n\n#signaling div {\n  margin-bottom: 20px;\n}\n\ntextarea {\n  width: 100%;\n  height: 100px;\n  margin: 10px 0;\n  resize: vertical;\n}\n\nbutton {\n  padding: 10px 20px;\n  margin: 5px;\n  cursor: pointer;\n}\n\n#gameCanvas {\n  border: 2px solid #000;\n  background-color: #4CAF50; /* Green field */\n}\n\n#instructions {\n  margin-top: 10px;\n}\n"],sourceRoot:""}]);const s=i},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,o,a,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&i[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},354:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),r="/*# ".concat(a," */");return[n].concat([r]).join("\n")}return[n].join("\n")}},72:e=>{var n=[];function t(e){for(var t=-1,o=0;o<n.length;o++)if(n[o].identifier===e){t=o;break}return t}function o(e,o){for(var r={},i=[],s=0;s<e.length;s++){var c=e[s],l=o.base?c[0]+o.base:c[0],d=r[l]||0,u="".concat(l," ").concat(d);r[l]=d+1;var p=t(u),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(f);else{var h=a(f,o);o.byIndex=s,n.splice(s,0,{identifier:u,updater:h,references:1})}i.push(u)}return i}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var r=o(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var s=t(r[i]);n[s].references--}for(var c=o(e,a),l=0;l<r.length;l++){var d=t(r[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}r=c}}},659:e=>{var n={};e.exports=function(e,t){var o=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,a&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleTagTransform(o,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={id:o,exports:{}};return e[o](r,r.exports,t),r.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var o=t(72),a=t.n(o),r=t(825),i=t.n(r),s=t(659),c=t.n(s),l=t(56),d=t.n(l),u=t(540),p=t.n(u),f=t(113),h=t.n(f),A=t(552),m={};function y(e,n,t){navigator.clipboard?navigator.clipboard.writeText(e).then((()=>{console.log(n)})).catch((e=>{console.error(t,e),alert(t)})):alert("Clipboard API not supported. Please copy manually.")}m.styleTagTransform=h(),m.setAttributes=d(),m.insert=c().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=p(),a()(A.A,m),A.A&&A.A.locals&&A.A.locals;var g=function(e,n,t,o){return new(t||(t=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((o=o.apply(e,n||[])).next())}))};const v=document.getElementById("hostButton"),b=document.getElementById("joinButton"),x=document.getElementById("signaling"),E=document.getElementById("setup"),B=document.getElementById("hostOfferSection"),C=document.getElementById("hostOffer"),w=document.getElementById("hostAnswerSection"),S=document.getElementById("hostRemoteAnswer"),k=document.getElementById("hostAddPeer"),I=document.getElementById("playerAnswerSection"),M=document.getElementById("playerOffer"),P=document.getElementById("playerCreateAnswer"),L=document.getElementById("playerAnswer"),O=document.getElementById("startGameButton"),D=document.getElementById("game"),N=document.getElementById("gameCanvas"),R=N.getContext("2d");let T=new Map,J=new Map,j={ball:{x:400,y:300,vx:0,vy:0},players:[]};const F=["blue","yellow","purple","orange","pink","cyan","magenta","lime"];v.onclick=()=>g(void 0,void 0,void 0,(function*(){E.classList.add("hidden"),x.classList.remove("hidden"),B.classList.remove("hidden"),w.classList.remove("hidden"),O.classList.remove("hidden"),j.players.push({id:"host",x:100,y:100,color:"black"});const e=function(e){const n=new RTCPeerConnection;T.set(e,n),n.onicecandidate=e=>{e.candidate};const t=n.createDataChannel("game");return J.set(e,t),console.log("Data channel created for peer",e),t.onmessage=n=>{!function(e,n){const t=j.players.find((e=>e.id===n));if(!t)return;switch(e.direction){case"up":t.y-=5;break;case"down":t.y+=5;break;case"left":t.x-=5;break;case"right":t.x+=5}t.x=Math.max(0,Math.min(N.width,t.x)),t.y=Math.max(0,Math.min(N.height,t.y));const o=j.ball.x-t.x,a=j.ball.y-t.y;if(Math.sqrt(o*o+a*a)<25){const e=5,n=Math.atan2(a,o);j.ball.vx+=e*Math.cos(n),j.ball.vy+=e*Math.sin(n)}}(JSON.parse(n.data),e)},t.onopen=()=>{console.log(`Data channel with peer ${e} opened`),t.send(JSON.stringify(j))},t.onclose=()=>{console.log(`Data channel with peer ${e} closed`),j.players=j.players.filter((n=>n.id!==e)),q()},n}(Math.random().toString(36).substr(2,9)),n=yield e.createOffer();yield e.setLocalDescription(n),yield z(e),C.value=JSON.stringify(e.localDescription),y(C.value,"Host offer has been copied to your clipboard.","Failed to copy host offer. Please copy it manually.")})),k.onclick=()=>g(void 0,void 0,void 0,(function*(){const e=S.value;if(!e)return void alert("Please paste the player answer.");const n=Array.from(T.keys());if(0===n.length)return void alert("No peer connections available to add.");const t=n[n.length-1],o=T.get(t);if(!o)return void alert("Peer connection not found.");const a=new RTCSessionDescription(JSON.parse(e));yield o.setRemoteDescription(a);const r={id:t,x:Math.random()*N.width,y:Math.random()*N.height,color:F[Math.floor(Math.random()*F.length)]};j.players.push(r),q(),S.value="",alert(`Peer ${t} added.`)})),b.onclick=()=>{E.classList.add("hidden"),x.classList.remove("hidden"),I.classList.remove("hidden")},P.onclick=()=>g(void 0,void 0,void 0,(function*(){const e=M.value;if(!e)return void alert("Please paste the host offer.");const n=new RTCSessionDescription(JSON.parse(e)),t=new RTCPeerConnection;t.ondatachannel=e=>{const n=e.channel;J.set("host",n),console.log("Data channel created for host"),n.onmessage=e=>{console.log("Received message from host:",e.data);const n=JSON.parse(e.data);j=n,U||(D.classList.remove("hidden"),x.classList.add("hidden"),function e(){G(),requestAnimationFrame(e)}(),window.addEventListener("keydown",(e=>{const n=function(e){switch(e){case"ArrowUp":return"up";case"ArrowDown":return"down";case"ArrowLeft":return"left";case"ArrowRight":return"right";default:return null}}(e.key);if(n){const e={type:"move",direction:n,playerId:"host"};for(const n of J.values())"open"===n.readyState&&(console.log(e),n.send(JSON.stringify(e)))}})),U=!0)},n.onopen=()=>{console.log("Data channel to host opened")},n.onclose=()=>{console.log("Data channel to host closed")}},t.onicecandidate=e=>{e.candidate},yield t.setRemoteDescription(n);const o=yield t.createAnswer();yield t.setLocalDescription(o),yield z(t),L.value=JSON.stringify(t.localDescription),y(L.value,"Player answer has been copied to your clipboard.","Failed to copy player answer. Please copy it manually.")}));let U=!1;function G(){if(R){R.clearRect(0,0,N.width,N.height),R.beginPath(),R.arc(j.ball.x,j.ball.y,15,0,2*Math.PI),R.fillStyle="red",R.fill(),R.closePath();for(const e of j.players)R.beginPath(),R.arc(e.x,e.y,10,0,2*Math.PI),R.fillStyle=e.color,R.fill(),R.closePath()}}function q(){const e=JSON.stringify(j);for(const[n,t]of J.entries())"open"===t.readyState&&t.send(e)}function z(e){return new Promise((n=>{if("complete"===e.iceGatheringState)n();else{const t=()=>{"complete"===e.iceGatheringState&&(e.removeEventListener("icegatheringstatechange",t),n())};e.addEventListener("icegatheringstatechange",t)}}))}O.onclick=()=>{!function e(){j.ball.x+=j.ball.vx,j.ball.y+=j.ball.vy,j.ball.vx*=.95,j.ball.vy*=.95,(j.ball.x<=15||j.ball.x>=N.width-15)&&(j.ball.vx=-j.ball.vx),(j.ball.y<=15||j.ball.y>=N.height-15)&&(j.ball.vy=-j.ball.vy),G(),q(),requestAnimationFrame(e)}(),D.classList.remove("hidden"),x.classList.add("hidden"),O.classList.add("hidden")}})();
//# sourceMappingURL=bundle.js.map